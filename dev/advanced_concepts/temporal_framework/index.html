<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Temporal Framework · SpineOpt.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">SpineOpt.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../getting_started/installation/">Installation</a></li><li><a class="tocitem" href="../../getting_started/setup_workflow/">Setting up a workflow</a></li><li><a class="tocitem" href="../../getting_started/creating_your_own_model/">Creating Your Own Model</a></li></ul></li><li><span class="tocitem">Concept Reference</span><ul><li><a class="tocitem" href="../../concept_reference/the_basics/">Basics of the model structure</a></li><li><a class="tocitem" href="../../concept_reference/Object Classes/">Object Classes</a></li><li><a class="tocitem" href="../../concept_reference/Relationship Classes/">Relationship Classes</a></li><li><a class="tocitem" href="../../concept_reference/Parameters/">Parameters</a></li><li><a class="tocitem" href="../../concept_reference/Parameter Value Lists/">Parameter Value Lists</a></li></ul></li><li><span class="tocitem">Mathematical Formulation</span><ul><li><a class="tocitem" href="../../mathematical_formulation/sets/">Sets</a></li><li><a class="tocitem" href="../../mathematical_formulation/variables/">Variables</a></li><li><a class="tocitem" href="../../mathematical_formulation/constraints/">Constraints</a></li><li><a class="tocitem" href="../../mathematical_formulation/objective_function/">Objective</a></li></ul></li><li><span class="tocitem">Advanced Concepts</span><ul><li class="is-active"><a class="tocitem" href>Temporal Framework</a><ul class="internal"><li><a class="tocitem" href="#Objects,-relationships,-and-their-parameters-1"><span>Objects, relationships, and their parameters</span></a></li><li><a class="tocitem" href="#General-principle-of-the-temporal-framework-1"><span>General principle of the temporal framework</span></a></li></ul></li><li><a class="tocitem" href="../stochastic_framework/">Stochastic Framework</a></li><li><a class="tocitem" href="../investment_optimization/">Investment Optimization</a></li><li><a class="tocitem" href="../unit_commitment/">Unit Commitment</a></li><li><a class="tocitem" href="../ramping_and_reserves/">Ramping and reserves</a></li><li><a class="tocitem" href="../decomposition/">Decomposition</a></li><li><a class="tocitem" href="../powerflow/">PTDF-Based Powerflow</a></li><li><a class="tocitem" href="../unit_constraints/">Unit Constraints</a></li><li><a class="tocitem" href="../pressure_driven_gas_transfer/">Pressure driven gas transfer</a></li><li><a class="tocitem" href="../Lossless_DC_power_flow/">Nodal loss-less DC powerflow</a></li><li><a class="tocitem" href="../representative_days_w_seasonal_storage/">Representative days with seasonal storages</a></li></ul></li><li><a class="tocitem" href="../../library/">Library</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Advanced Concepts</a></li><li class="is-active"><a href>Temporal Framework</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Temporal Framework</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Spine-project/SpineOpt.jl/blob/master/docs/src/advanced_concepts/temporal_framework.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Temporal-Framework-1"><a class="docs-heading-anchor" href="#Temporal-Framework-1">Temporal Framework</a><a class="docs-heading-anchor-permalink" href="#Temporal-Framework-1" title="Permalink"></a></h1><p>Spine Model aims to provide a high degree of flexibility in the temporal dimension across different components of the created model. This means that the user has some freedom to choose how the temporal aspects of different components of the model are defined. This freedom increases the variety of problems that can be tackled in Spine: from very coarse, long term models, to very detailed models with a more limited horizon, or a mix of both. The choice of the user on how this flexibility is used will lead to the temporal structure of the model.</p><p>The main components of flexibility consist of the following parts:</p><ul><li>The horizon that is modeled: end and start time</li><li>Temporal resolution</li><li>Possibility of a rolling optimization window</li><li>Support for commonly used methods such as representative days</li></ul><p>Part of the temporal flexibility in Spine is due to the fact that these options mentioned above can be taken differently across different components of the model, which can be very useful when different markets are coupled in a single model. The resolution and horizon of the gas market can for example be taken differently than that of the electricity market. This documentation aims to give the reader insight in how these aspects are defined, and which objects are used for this.</p><p>We start by introducing the relevant objects with their parameters, and the relevant relationship classes for the temporal structure. Afterwards, we will discuss how this setting creates flexibility and will present some of the practical approaches to create a variety of temporal structures.</p><h2 id="Objects,-relationships,-and-their-parameters-1"><a class="docs-heading-anchor" href="#Objects,-relationships,-and-their-parameters-1">Objects, relationships, and their parameters</a><a class="docs-heading-anchor-permalink" href="#Objects,-relationships,-and-their-parameters-1" title="Permalink"></a></h2><p>In this section, the objects and relationships will be discussed that form the temporal structure together.</p><h3 id="Objects-relevant-for-the-temporal-framework-1"><a class="docs-heading-anchor" href="#Objects-relevant-for-the-temporal-framework-1">Objects relevant for the temporal framework</a><a class="docs-heading-anchor-permalink" href="#Objects-relevant-for-the-temporal-framework-1" title="Permalink"></a></h3><p>For the objects, the relevant parameters will also be introduced, along with the type of values that are allowed, following the format below:  </p><ul><li>&#39;parameter_name&#39; : &quot;Allowed value type&quot;</li></ul><h4 id="[model](@ref)-object-1"><a class="docs-heading-anchor" href="#[model](@ref)-object-1"><a href="../../concept_reference/Object Classes/#model-1">model</a> object</a><a class="docs-heading-anchor-permalink" href="#[model](@ref)-object-1" title="Permalink"></a></h4><p>Each <code>model</code> object holds general information about the model at hand. Here we only discuss the time related parameters:</p><ul><li><a href="../../concept_reference/Parameters/#model_start-1">model_start</a> and <a href="../../concept_reference/Parameters/#model_end-1">model_end</a> : &quot;Date time value&quot;</li></ul><p>These two parameters define the model horizon. A Datetime value is to be taken for both parameters, in which case they directly mark respectively the beginning and end of the modeled time horizon.</p><ul><li><a href="../../concept_reference/Parameters/#duration_unit-1">duration_unit</a> (optional): &quot;hour or minute&quot;</li></ul><p>This parameters gives the unit of duration that is used in the model calculations. The default value for this parameter is &#39;minute&#39;.</p><ul><li><a href="../../concept_reference/Parameters/#roll_forward-1">roll_forward</a> (optional): &quot;duration value&quot;</li></ul><p>This parameter defines how much the optimization window rolls forward in a rolling horizon optimization and should be expressed as a duration. In the practical approaches presented below, the rolling window optimization will be explained in more detail.</p><h4 id="[temporal_block](@ref)-object-1"><a class="docs-heading-anchor" href="#[temporal_block](@ref)-object-1"><a href="../../concept_reference/Object Classes/#temporal_block-1">temporal_block</a>  object</a><a class="docs-heading-anchor-permalink" href="#[temporal_block](@ref)-object-1" title="Permalink"></a></h4><p>A temporal block defines the properties of the optimization that is to be solved in the current window. Most importantly, it holds the necessary information about the resolution and horizon of the optimization.</p><ul><li><a href="../../concept_reference/Parameters/#resolution-1">resolution</a> (optional): &quot;duration value&quot; or &quot;array of duration values&quot;</li></ul><p>This parameter specifies the resolution of the temporal block, or in other words: the length of the timesteps used in the optimization run.</p><ul><li><a href="../../concept_reference/Parameters/#block_start-1">block_start</a> (optional): &quot;duration value&quot; or &quot;Date time value&quot;</li></ul><p>Indicates the start of this temporal block.</p><ul><li><a href="../../concept_reference/Parameters/#block_end-1">block_end</a>(optional): &quot;duration value&quot; or &quot;Date time value&quot;</li></ul><p>Indicates the end of this temporal block.</p><h3 id="Relationships-relevant-for-the-temporal-framework-1"><a class="docs-heading-anchor" href="#Relationships-relevant-for-the-temporal-framework-1">Relationships relevant for the temporal framework</a><a class="docs-heading-anchor-permalink" href="#Relationships-relevant-for-the-temporal-framework-1" title="Permalink"></a></h3><h4 id="[model__temporal_block](@ref)-relationship-1"><a class="docs-heading-anchor" href="#[model__temporal_block](@ref)-relationship-1"><a href="../../concept_reference/Relationship Classes/#model__temporal_block-1">model__temporal_block</a> relationship</a><a class="docs-heading-anchor-permalink" href="#[model__temporal_block](@ref)-relationship-1" title="Permalink"></a></h4><p>In this relationship, a model instance is linked to a temporal block. If this relationship doesn&#39;t exist - the temporal block is disregarded from this optimization model.</p><h4 id="[model__default_temporal_block](@ref)-relationship-1"><a class="docs-heading-anchor" href="#[model__default_temporal_block](@ref)-relationship-1"><a href="../../concept_reference/Relationship Classes/#model__default_temporal_block-1">model__default_temporal_block</a> relationship</a><a class="docs-heading-anchor-permalink" href="#[model__default_temporal_block](@ref)-relationship-1" title="Permalink"></a></h4><p>Defines the default temporal block used for model objects, which will be replaced when a specific relationship is defined for a model in <code>model__temporal_block</code>.</p><h4 id="[node__temporal_block](@ref)-relationship-1"><a class="docs-heading-anchor" href="#[node__temporal_block](@ref)-relationship-1"><a href="../../concept_reference/Relationship Classes/#node__temporal_block-1">node__temporal_block</a> relationship</a><a class="docs-heading-anchor-permalink" href="#[node__temporal_block](@ref)-relationship-1" title="Permalink"></a></h4><p>This relationship will link a node to a temporal block.</p><h4 id="[units_on__temporal_block](@ref)-relationship-1"><a class="docs-heading-anchor" href="#[units_on__temporal_block](@ref)-relationship-1"><a href="../../concept_reference/Relationship Classes/#units_on__temporal_block-1">units_on__temporal_block</a> relationship</a><a class="docs-heading-anchor-permalink" href="#[units_on__temporal_block](@ref)-relationship-1" title="Permalink"></a></h4><p>This relationship links the <code>units_on</code> variable of a unit to a temporal block and will therefore govern the time-resolution of the unit&#39;s online/offline status.</p><h4 id="[unit__investment_temporal_block](@ref)-relationship-1"><a class="docs-heading-anchor" href="#[unit__investment_temporal_block](@ref)-relationship-1"><a href="../../concept_reference/Relationship Classes/#unit__investment_temporal_block-1">unit__investment_temporal_block</a> relationship</a><a class="docs-heading-anchor-permalink" href="#[unit__investment_temporal_block](@ref)-relationship-1" title="Permalink"></a></h4><p>This relationship sets the temporal dimensions for investment decisions of a certain unit. The separation between this relationship and the <code>units_on__temporal_block</code>, allows the user for example to give a much finer resolution to a unit&#39;s on- or offline status than to it&#39;s investment decisions.</p><h4 id="[model__default_investment_temporal_block](@ref)-relationship-1"><a class="docs-heading-anchor" href="#[model__default_investment_temporal_block](@ref)-relationship-1"><a href="../../concept_reference/Relationship Classes/#model__default_investment_temporal_block-1">model__default_investment_temporal_block</a> relationship</a><a class="docs-heading-anchor-permalink" href="#[model__default_investment_temporal_block](@ref)-relationship-1" title="Permalink"></a></h4><p>Defines the default temporal block used for investment decisions, which will be replaced when a specific relationship is defined for a unit in <code>unit__investment_temporal_block</code>.</p><h2 id="General-principle-of-the-temporal-framework-1"><a class="docs-heading-anchor" href="#General-principle-of-the-temporal-framework-1">General principle of the temporal framework</a><a class="docs-heading-anchor-permalink" href="#General-principle-of-the-temporal-framework-1" title="Permalink"></a></h2><p>The general principle of the Spine modeling temporal structure is that different temporal blocks can be defined and linked to different objects in a model. This leads to great flexibility in the temporal structure of the model as a whole. To illustrate this, we will discuss some of the possibilities that arise in this framework.</p><h3 id="One-single-temporal_block-1"><a class="docs-heading-anchor" href="#One-single-temporal_block-1">One single <code>temporal_block</code></a><a class="docs-heading-anchor-permalink" href="#One-single-temporal_block-1" title="Permalink"></a></h3><h4 id="Single-solve-with-single-block-1"><a class="docs-heading-anchor" href="#Single-solve-with-single-block-1">Single solve with single block</a><a class="docs-heading-anchor-permalink" href="#Single-solve-with-single-block-1" title="Permalink"></a></h4><p>The simplest case is a single solve of the entire time horizon (so <code>roll_forward</code> not defined) with a fixed resolution. In this case, only one temporal block has to be defined with a fixed resolution. Each node has to be linked to this <code>temporal_block</code>.</p><p>Alternatively, a variable resolution can be defined by choosing an array of durations for the <a href="../../concept_reference/Parameters/#resolution-1">resolution</a> parameter. The sum of the durations in the array then have to match the length of the temporal block. The example below illustrates an optimization that spans one day for which the resolution is hourly in the beginning and then gradually decreases to a 6h resolution at the end.</p><ul><li><code>temporal_block_1</code><ul><li><code>block_start</code>: 0h</li><li><code>block_start</code>: 1D</li><li><code>resolution</code>: [1h 1h 1h 1h 2h 2h 2h 4h 4h 6h]</li></ul></li></ul><h4 id="Rolling-window-optimization-with-single-block-1"><a class="docs-heading-anchor" href="#Rolling-window-optimization-with-single-block-1">Rolling window optimization with single block</a><a class="docs-heading-anchor-permalink" href="#Rolling-window-optimization-with-single-block-1" title="Permalink"></a></h4><p>A model with a single <code>temporal_block</code> can also be optimized in a rolling horizon framework. In this case, the <code>roll_forward</code> parameter has to be defined in the <code>model</code> object. The <code>roll_forward</code> parameter will then determine how much the optimization moves forward with every step, while the size of the temporal block will determine how large a time frame is optimized in each step. To see this more clearly, let&#39;s take a look at an example.</p><p>Suppose we want to model a horizon of one week, with a rolling window size of one day. The <code>roll_forward</code> parameter will then be a duration value of 1d. If we take the <code>temporal_block</code> parameters <code>block_start</code> and <code>block_end</code> to be the duration values 0h and 1d respectively, the model will optimize each day of the week separately. However, we could also take the <code>block_end</code> parameter to be 2d. Now the model will start by optimizing day 1 and day 2 together, after which it keeps only the values obtained for the first day, and moves forward to optimize the second and third day together.</p><p>Again, a variable resolution can be implemented for the rolling window optimization. The sum of the durations must in this case match the size of the optimized window.</p><h3 id="Advanced-usage:-multiple-temporal_block-objects-1"><a class="docs-heading-anchor" href="#Advanced-usage:-multiple-temporal_block-objects-1">Advanced usage: multiple <code>temporal_block</code> objects</a><a class="docs-heading-anchor-permalink" href="#Advanced-usage:-multiple-temporal_block-objects-1" title="Permalink"></a></h3><h4 id="Single-solve-with-multiple-blocks-1"><a class="docs-heading-anchor" href="#Single-solve-with-multiple-blocks-1">Single solve with multiple blocks</a><a class="docs-heading-anchor-permalink" href="#Single-solve-with-multiple-blocks-1" title="Permalink"></a></h4><h5 id="Disconnected-time-periods-1"><a class="docs-heading-anchor" href="#Disconnected-time-periods-1">Disconnected time periods</a><a class="docs-heading-anchor-permalink" href="#Disconnected-time-periods-1" title="Permalink"></a></h5><p>Multiple temporal blocks can be used to optimize disconnected periods. Let&#39;s take a look at an example in which two temporal blocks are defined.</p><ul><li><code>temporal_block_1</code><ul><li><code>block_start</code>: 0h</li><li><code>block_end</code>: 4h</li></ul></li><li><code>temporal_block_2</code><ul><li><code>block_start</code>: 12h</li><li><code>block_end</code>: 16h</li></ul></li></ul><p>This example will lead to an optimization of the first four hours of the model horizon, and also of hour 12 to 16. By defining exactly the same relationships for the two temporal blocks, an optimization of disconnected periods is achieved for exactly the same model components. This leads to the possibility of implementing the widely used representative days method. If desired, it is possible to choose a different temporal resolution for the different <code>temporal_blocks</code>.</p><h5 id="Different-regions/commodities-in-different-resolutions-1"><a class="docs-heading-anchor" href="#Different-regions/commodities-in-different-resolutions-1">Different regions/commodities in different resolutions</a><a class="docs-heading-anchor-permalink" href="#Different-regions/commodities-in-different-resolutions-1" title="Permalink"></a></h5><p>Multiple temporal blocks can also be used to model different regions or different commodities with a different resolution. This is especially useful when there is a certain region or commodity of interest, while other elements are connected to this but require less detail. For this kind of usage, the relationships that are defined for the temporal blocks will be different, as shown in the example below.</p><ul><li><code>temporal_blocks</code><ul><li><code>temporal_block_1</code><ul><li><code>resolution</code>: 1h</li></ul></li><li><code>temporal_block_2</code><ul><li><code>resolution</code>: 2h</li></ul></li></ul></li><li><code>nodes</code><ul><li><code>node_1</code></li><li><code>node_2</code></li></ul></li><li><code>node_temporal_block</code> relationships<ul><li><code>node_1_temporal_block_1</code></li><li><code>node_2_temporal_block_2</code></li></ul></li></ul><p>Similarly, the on- and offline status of a unit can be modeled with a lower resolution than the actual output of that unit, by defining the <code>units_on_temporal_block</code> relationship with a different temporal block than the one used for the <code>node_temporal_block</code> relationship (of the node to which the unit is connected).</p><h4 id="Rolling-horizon-with-multiple-blocks-1"><a class="docs-heading-anchor" href="#Rolling-horizon-with-multiple-blocks-1">Rolling horizon with multiple blocks</a><a class="docs-heading-anchor-permalink" href="#Rolling-horizon-with-multiple-blocks-1" title="Permalink"></a></h4><h5 id="Rolling-horizon-with-different-window-sizes-1"><a class="docs-heading-anchor" href="#Rolling-horizon-with-different-window-sizes-1">Rolling horizon with different window sizes</a><a class="docs-heading-anchor-permalink" href="#Rolling-horizon-with-different-window-sizes-1" title="Permalink"></a></h5><p>Similar to what has been discussed above in <a href="#Different-regions/commodities-in-different-resolutions-1">Different regions/commodities in different resolutions</a>, different commodities or regions can be modeled with a different resolution in the rolling horizon setting. The way to do it is completely analogous. Furthermore, when using the rolling horizon framework, a different window size can be chosen for the different modeled components, by simply using a different <code>block_end</code> parameter. #TODO: What happens to coupling constraints between different regions?</p><h5 id="Rolling-horizon-where-the-resolution-is-dependent-on-the-absolute-time-1"><a class="docs-heading-anchor" href="#Rolling-horizon-where-the-resolution-is-dependent-on-the-absolute-time-1">Rolling horizon where the resolution is dependent on the absolute time</a><a class="docs-heading-anchor-permalink" href="#Rolling-horizon-where-the-resolution-is-dependent-on-the-absolute-time-1" title="Permalink"></a></h5><p>TODO : How can this be done, since there is no parameter that indicates whether a temporal block is static or rolling</p><h5 id="Putting-it-all-together:-rolling-horizon-with-variable-resolution-that-differs-for-different-model-components-1"><a class="docs-heading-anchor" href="#Putting-it-all-together:-rolling-horizon-with-variable-resolution-that-differs-for-different-model-components-1">Putting it all together: rolling horizon with variable resolution that differs for different model components</a><a class="docs-heading-anchor-permalink" href="#Putting-it-all-together:-rolling-horizon-with-variable-resolution-that-differs-for-different-model-components-1" title="Permalink"></a></h5><p>Below is an example of an advanced use case in which a rolling horizon optimization is used, and different model components are optimized with a different resolution. By choosing the relevant parameters in the following way:</p><ul><li><code>model</code><ul><li><code>roll_forward</code>: 4h</li></ul></li><li><code>temporal_blocks</code><ul><li><code>temporal_block_A</code><ul><li><code>resolution</code>: [1h 1h 2h 2h 2h 3h 3h]</li><li><code>block_end</code>: 14h</li></ul></li><li><code>temporal_block_B</code><ul><li><code>resolution</code>: [2h 2h 4h 6h]</li><li><code>block_end</code>: 14h</li></ul></li></ul></li><li><code>nodes</code><ul><li><code>node_1</code></li><li><code>node_2</code></li></ul></li><li><code>node_temporal_block</code> relationships<ul><li><code>node_1_temporal_block_1</code></li><li><code>node_2_temporal_block_2</code></li></ul></li></ul><p>The two model components that are considered have a different resolution, and their own resolution is also varying within the optimization window. Note that in this case the two optimization windows have the same size, but this is not strictly necessary. The image below visualizes the first two window optimizations of this model.</p><p><img src="../../figs/Temporal_structure.svg" alt="temporal structure"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../mathematical_formulation/objective_function/">« Objective</a><a class="docs-footer-nextpage" href="../stochastic_framework/">Stochastic Framework »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 22 April 2021 19:11">Thursday 22 April 2021</span>. Using Julia version 1.6.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
